# 使用QPushButton, QCheckBox, QComboBox, QLabel and QSlider widgets

在Qt中，与大多数GUI框架一样，小部件是指用户可以与之交互的UI组件的名称。用户界面由多个小部件组成，排列在窗口内。

Qt提供了许多可用的小部件，甚至允许您创建自己的自定义和定制小部件。在本教程中，您将学习Qt GUI应用程序中一些最常用小部件的基础知识。

**目录**

- 快速小部件演示
- QLabel
- QCheckBox
- QComboBox
- QListWidget
- QLineEdit
- QSpinBox和QDoubleSpinBox
- QSlider
- QDial
- 结论

**快速小部件演示**

首先，让我们看一下一些最常见的PyQt小部件。以下代码创建了一系列PyQt小部件，并将它们添加到窗口布局中，以便您可以一起查看它们：

```python
import sys

from PyQt5.QtWidgets import (
    QApplication,
    QCheckBox,
    QComboBox,
    QDateEdit,
    QDateTimeEdit,
    QDial,
    QDoubleSpinBox,
    QFontComboBox,
    QLabel,
    QLCDNumber,
    QLineEdit,
    QMainWindow,
    QProgressBar,
    QPushButton,
    QRadioButton,
    QSlider,
    QSpinBox,
    QTimeEdit,
    QVBoxLayout,
    QWidget,
)

# 通过继承QMainWindow来自定义应用程序的主窗口
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("Widgets App")

        layout = QVBoxLayout()
        widgets = [
            QCheckBox,
            QComboBox,
            QDateEdit,
            QDateTimeEdit,
            QDial,
            QDoubleSpinBox,
            QFontComboBox,
            QLCDNumber,
            QLabel,
            QLineEdit,
            QProgressBar,
            QPushButton,
            QRadioButton,
            QSlider,
            QSpinBox,
            QTimeEdit,
        ]

        for w in widgets:
            layout.addWidget(w())

        widget = QWidget()
        widget.setLayout(layout)

        # 设置窗口的中央小部件。小部件将默认扩展以占据窗口中的所有空间。
        self.setCentralWidget(widget)

app = QApplication(sys.argv)
window = MainWindow()
window.show()
app.exec_()
```

> 运行它！您将看到一个窗口，其中包含我们创建的所有小部件。

![图片1]()

> 我们将在下一个教程中介绍Qt中布局的工作原理。

让我们从上到下查看所有示例小部件：

| 小部件         | 功能                   |
| -------------- | ---------------------- |
| QCheckbox      | 复选框                 |
| QComboBox      | 下拉列表框             |
| QDateEdit      | 用于编辑日期和日期时间 |
| QDateTimeEdit  | 用于编辑日期和日期时间 |
| QDial          | 可旋转的刻度盘         |
| QDoubleSpinbox | 用于浮点数的数字微调器 |
| QFontComboBox  | 字体列表               |
| QLCDNumber     | 相当丑陋的LCD显示      |
| QLabel         | 仅用于标签，不可交互   |
| QLineEdit      | 输入一行文本           |
| QProgressBar   | 进度条                 |
| QPushButton    | 按钮                   |
| QRadioButton   | 切换集，只有一个活动项 |
| QSlider        | 滑块                   |
| QSpinBox       | 整数微调器             |
| QTimeEdit      | 用于编辑时间           |

除了这些，还有更多的小部件，但它们不太容易展示！您可以通过查阅Qt文档来了解所有小部件。

接下来，我们将逐步介绍一些最常用的小部件，并详细了解它们。要尝试这些小部件，我们需要一个简单的应用程序将它们放在其中。将以下代码保存到名为 `app.py`的文件中并运行它以确保它正常工作：

```python
import sys
from PyQt5.QtCore import Qt
from PyQt5.QtGui import QPixmap
from PyQt5.QtWidgets import (
    QApplication,
    QCheckBox,
    QComboBox,
    QDoubleSpinBox,
    QLabel,
    QLineEdit,
    QListWidget,
    QMainWindow,
    QSlider,
    QSpinBox,
)

class MainWindow(QMainWindow):
    def __init__(self):
        super(MainWindow, self).__init__()

        self.setWindowTitle("My App")

app = QApplication(sys.argv)
window = MainWindow()
window.show()
app.exec()
```

在上面的代码中，我们导入了一些Qt小部件。现在，我们将逐个介绍这些小部件，将它们添加到我们的应用程序中，并查看它们的行为。


QLabel
我们将从QLabel开始介绍，可以说是Qt工具箱中最简单的小部件之一。这是一个简单的单行文本，您可以在应用程序中定位它。您可以通过在创建时传递字符串来设置文本：

```python
widget = QLabel("Hello")
```

您还可以通过使用 `setText()`方法动态设置标签的文本：

```python
widget = QLabel("1")  # 创建带有文本1的标签。
widget.setText("2")   # 现在标签显示2。
```

您还可以调整字体参数，例如字体的大小或小部件中文本的对齐方式：

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super(MainWindow, self).__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello")
        font = label.font()
        font.setPointSize(30)
        label.setFont(font)
        label.setAlignment(Qt.AlignHCenter | Qt.AlignVCenter)

        self.setCentralWidget(label)
```

在上面的代码中，我们创建了一个带有文本“Hello”的标签，并调整了其字体大小和文本在小部件中的对齐方式。

![图片2]()

> Font tip: 请注意，如果要更改小部件字体的属性，通常最好获取当前字体，更新字体，然后将其应用回去。这可以确保字体的样式保持与桌面约定一致。

对齐方式由Qt命名空间中的标志指定。以下表格列出了用于水平对齐的可用标志：

| 标志            | 行为                   |
| --------------- | ---------------------- |
| Qt.AlignLeft    | 与左边缘对齐。         |
| Qt.AlignRight   | 与右边缘对齐。         |
| Qt.AlignHCenter | 在可用空间中水平居中。 |
| Qt.AlignJustify | 在可用空间中对齐文本。 |

同样，可用于垂直对齐的标志有：

| 标志            | 行为                   |
| --------------- | ---------------------- |
| Qt.AlignTop     | 与顶部对齐。           |
| Qt.AlignBottom  | 与底部对齐。           |
| Qt.AlignVCenter | 在可用空间中垂直居中。 |

您可以使用竖线（|）将标志组合在一起。但是，请注意，您一次只能使用垂直或水平对齐标志：

```python
align_top_left = Qt.AlignLeft | Qt.AlignTop
```

> 请注意，您使用OR竖线（|）将两个标志组合在一起（而不是A＆B）。这是因为这些标志是不重叠的位掩码。例如，Qt.AlignmentFlag.AlignLeft的十六进制值为0x0001，而Qt.AlignmentFlag.AlignBottom为0x0040。通过将它们OR在一起，我们得到值0x0041，表示“左下”。这个原理适用于所有其他组合Qt标志。如果这对您来说是无稽之谈，请随意忽略它并继续前进。只需记住使用竖线（|）符号。

最后，还有一个同时在两个方向上居中的速记标志：

| 标志           | 行为                     |
| -------------- | ------------------------ |
| Qt.AlignCenter | 在水平和垂直方向上居中。 |

奇怪的是，您还可以使用 `QLabel`显示图像，使用 `setPixmap()`。这需要一个*pixmap*，您可以通过将图像文件名传递给 `QPixmap`类来创建。在本书提供的示例文件中，您可以找到一个名为 `otje.jpg`的文件，可以按照以下方式在窗口中显示它：

```python
widget.setPixmap(QPixmap('otje.jpg'))
```

![图片3]()
